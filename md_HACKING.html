<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>World of Might and Magic: Building instructions and guidance</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">World of Might and Magic<span id="projectnumber">&#160;9066fe2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Building instructions and guidance </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >This document contains information about required dependencies and various guidance about compilation and development processes.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Dependencies</h1>
<p >Main dependencies:</p><ul>
<li><a href="https://www.libsdl.org/download-2.0.php">SDL2</a> - crossplatform media framework</li>
<li><a href="https://ffmpeg.zeranoe.com/builds/">FFmpeg</a> - video support (NB 5.x currently unsupported)</li>
<li><a href="https://www.openal.org/downloads/OpenAL11CoreSDK.zip">OpenAL</a> - audio support</li>
<li><a href="http://gnuwin32.sourceforge.net/packages/zlib.htm">Zlib</a> - compression</li>
</ul>
<p >On windows above dependencies are resolved automatically during cmake phase but you must also have Windows SDK v10.0.20348.0 or higher installed.</p>
<p >Additional dependencies:</p><ul>
<li>CMake 3.20.4+ (3.20.21032501-MSVC_2 from VS2019 won't work)</li>
<li>Python 3.x (optional, for style checker functionality)</li>
</ul>
<p >Minimum required compiler versions are as follows:</p><ul>
<li>Visual Studio 2019</li>
<li>GCC 11</li>
<li>Clang 13</li>
</ul>
<p >The following IDEs have been tested and should work fine:</p><ul>
<li>Visual Studio (2019 or later)</li>
<li>Visual Studio Code (2022 or later)</li>
<li>CLion (2022 or later)</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Building on *nix platforms</h1>
<p >This project uses the <a href="https://cmake.org">CMake</a> build system. Use the following commands to clone repository and build (it is recommended to build in a separate directory as shown here):</p>
<div class="fragment"><div class="line">$ git clone https://github.com/gp-alex/world-of-might-and-magic.git</div>
<div class="line">$ cd world-of-might-and-magic</div>
<div class="line">$ mkdir build &amp;&amp; cd build</div>
<div class="line">$ cmake ..</div>
<div class="line">$ make</div>
</div><!-- fragment --><p >To compile x86 build on x86_64 platform you can pass <code>-m32</code> via compiler flags to cmake. For example instead of just <code>cmake ..</code> above execute <code>CFLAGS="-m32" CXXFLAGS="-m32" cmake ..</code></p>
<p >You can also select platform dependent <a href="https://cmake.org/cmake/help/latest/manual/cmake-generators.7.html">generator</a> for your favorite IDE.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Building on Windows</h1>
<p >You will require the following installed on your computer: Git and Visual Studio 2019/2022.</p>
<ul>
<li>Clone, fork or download the repo <code><a href="https://github.com/gp-alex/world-of-might-and-magic.git">https://github.com/gp-alex/world-of-might-and-magic.git</a></code></li>
<li>Open the folder in Visual Studio</li>
<li>Select build configuration (x32 or x64) and wait for CMake configuration to complete</li>
<li>Select startup item as <code>World_of_Might_and_Magic.exe</code></li>
<li>Run!</li>
</ul>
<p >If you wish you can also disable autoresolving main dependencies by turning off <code>PREBUILT_DEPENDENCIES</code> cmake option and pass your own dependencies source, e.g. via <a href="https://github.com/microsoft/vcpkg">vcpkg</a> integration.</p>
<p ><b>Be aware</b> that Visual Studio has a bug with git submodules not syncing between branches. So when checking out the branch or switching to different branch you may need to run the following command manually: <code>git submodule update --init</code></p>
<h1><a class="anchor" id="autotoc_md4"></a>
Project Resources</h1>
<p >The Git repo contains some additional resources required for the engine to run. Please copy the entire 'shaders' folder from the subdirectory 'resources' to the location of the game assets. Please check the logger output for the required path if you are unsure.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Support</h1>
<p >Still having problems? Try to ask for help on our discord. <a href="https://discord.gg/jRCyPtq"><img src="https://img.shields.io/badge/chat-on%20discord-green.svg" alt="" style="pointer-events: none;" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md6"></a>
Coding style</h1>
<p >For the C++ code we are following the <a href="http://google.github.io/styleguide/cppguide.html">Google C++ Style Guide</a>.\ Source code is automatically checked against it and Pull Request will fail if you don't follow it.</p>
<p >To perform style check before pushing anything you can build <code>check_style</code> target. In Visual Studio you can do that by going to <em><b>Solution Explorer → Change Views → CMake targets</b></em>. Right click and build <code>check_style</code>, errors will be listed in output.</p>
<p >Some additional style preferences that we follow, in no particular order:</p><ul>
<li><code>*</code> and <code>&amp;</code> in type declarations are preceded by a space. So it's <code>char *string</code>, and not <code>char* string</code>.</li>
<li>Documentation should be in doxydoc format with <code>@</code> used for tags, and starting with <code>/**</code> comment introducer.</li>
<li>Documentation should be written in English. There are some leftover comments in Russian throughout the codebase, feel free to translate them into English when you have a chance.</li>
<li>Please leave original function offsets intact. If you have a chance move them to doxygen comments using offset alias (eg <code>@par Original binary offset:\ilinebr 0xCAFEBEEF.</code>)</li>
<li>Use <code>enum class</code>es followed by <code>using enum</code> statements instead of ordinary <code>enum</code>s. This provides type safety without changing the syntax. For flags, use <code><a class="el" href="classFlags.html">Flags</a></code> class.</li>
<li>Use <code>MM_</code> prefix for macro naming. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
